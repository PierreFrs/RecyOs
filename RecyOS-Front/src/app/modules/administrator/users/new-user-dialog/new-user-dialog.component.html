<h1 class="text-4xl font-extrabold tracking-tight" mat-dialog-title>Ajouter un nouveau utilisateur</h1>
<div mat-dialog-content [formGroup]="userForm">
    <mat-form-field class="w-full" appearance="fill">
        <mat-label>Prénom</mat-label>
        <input matInput
               [autocomplete]="'off'"
               formControlName="firstName"
               placeholder="Prénom">
        <mat-error *ngIf="userForm.get('firstName').hasError('required')">
            Le prénom est requis
        </mat-error>
    </mat-form-field>

    <mat-form-field class="w-full" appearance="fill">
        <mat-label>Nom</mat-label>
        <input matInput
               [autocomplete]="'off'"
               formControlName="lastName"
               placeholder="Nom">
        <mat-error *ngIf="userForm.get('lastName').hasError('required')">
            Le nom est requis
        </mat-error>
    </mat-form-field>

    <mat-form-field class="w-full" appearance="fill">
        <mat-label>Email</mat-label>
        <input matInput
               [autocomplete]="'off'"
               formControlName="email"
               placeholder="Email">
        <mat-error *ngIf="userForm.get('email').hasError('required')">
            L'email est requis
        </mat-error>
        <mat-error *ngIf="userForm.get('email').hasError('email')">
            Format d'email invalide
        </mat-error>
    </mat-form-field>

    <mat-form-field class="w-full" appearance="fill">
        <mat-label>Mot de passe</mat-label>
        <input matInput
               [type]="hidePassword ? 'password' : 'text'"
               formControlName="password"
               placeholder="Mot de passe">
        <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword">
            <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-error *ngIf="userForm.get('password').hasError('required')">
            Le mot de passe est requis
        </mat-error>
        <mat-error *ngIf="userForm.get('password').hasError('minlength')">
            Le mot de passe doit contenir au moins 8 caractères
        </mat-error>
        <mat-error *ngIf="userForm.get('password').hasError('pattern')">
            Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caractère spécial
        </mat-error>
    </mat-form-field>

    <mat-form-field class="w-full" appearance="fill">
        <mat-label>Confirmer le mot de passe</mat-label>
        <input matInput
               [type]="hidePassword ? 'password' : 'text'"
               formControlName="confirmPassword"
               placeholder="Confirmer le mot de passe">
        <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword">
            <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-error *ngIf="userForm.get('confirmPassword').hasError('required')">
            La confirmation du mot de passe est requise
        </mat-error>
        <mat-error *ngIf="userForm.hasError('passwordMismatch')">
            Les mots de passe ne correspondent pas
        </mat-error>
    </mat-form-field>
</div>

<div mat-dialog-actions class="flex flex-row items-center justify-between">
    <div class="flex items-center">
        <button mat-button (click)="onCancel()">Annuler</button>
    </div>
    <button mat-flat-button 
            (click)="onCreate()" 
            color="primary" 
            [disabled]="!isValid">
        Créer
    </button>
</div>
